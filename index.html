<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Calend치rio do Quadro</title>
  <script src="https://p.trellocdn.com/power-up.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f9f9f9;
    }
    .calendar-container {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .calendar-header {
      text-align: center;
      margin-bottom: 20px;
    }
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
    }
    .calendar-day {
      padding: 8px;
      text-align: center;
      border: 1px solid #eee;
      cursor: pointer;
    }
    .calendar-day:hover {
      background: #f0f0f0;
    }
    .calendar-day.today {
      background: #0079bf;
      color: white;
    }
    .calendar-day.has-cards {
      background: #ff6b6b;
      color: white;
    }
    .weekday-header {
      font-weight: bold;
      background: #f5f5f5;
      padding: 8px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="calendar-container">
    <div class="calendar-header">
      <h2>游늰 Calend치rio do Quadro</h2>
      <p>Visualize seus cart칫es por data</p>
    </div>
    <div id="calendar"></div>
  </div>

  <script>
    // Inicializa칞칚o do Power-Up - PADR츾O FUNCIONAL DO TRELLO
    window.TrelloPowerUp.initialize({
      'board-buttons': function(t, options) {
        return [{
          icon: {
            dark: 'https://cdn-icons-png.flaticon.com/512/747/747310.png',
            light: 'https://cdn-icons-png.flaticon.com/512/747/747310.png'
          },
          text: 'Calend치rio',
          callback: function(t) {
            return t.popup({
              title: 'Calend치rio do Quadro',
              url: './popup.html',
              height: 500
            });
          }
        }];
      }
    });

    // Fun칞칚o para gerar calend치rio
    function generateCalendar() {
      const calendar = document.getElementById('calendar');
      const today = new Date();
      const currentMonth = today.getMonth();
      const currentYear = today.getFullYear();
      
      const firstDay = new Date(currentYear, currentMonth, 1);
      const lastDay = new Date(currentYear, currentMonth + 1, 0);
      const startDate = new Date(firstDay);
      startDate.setDate(startDate.getDate() - firstDay.getDay());
      
      const weekdays = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S치b'];
      
      let html = '<div class="calendar-grid">';
      
      // Cabe칞alho dos dias da semana
      weekdays.forEach(day => {
        html += `<div class="weekday-header">${day}</div>`;
      });
      
      // Dias do calend치rio
      for (let i = 0; i < 42; i++) {
        const date = new Date(startDate);
        date.setDate(startDate.getDate() + i);
        
        const isCurrentMonth = date.getMonth() === currentMonth;
        const isToday = date.toDateString() === today.toDateString();
        const dayClass = isToday ? 'calendar-day today' : 'calendar-day';
        
        html += `<div class="${dayClass}" style="opacity: ${isCurrentMonth ? '1' : '0.5'}">${date.getDate()}</div>`;
      }
      
      html += '</div>';
      calendar.innerHTML = html;
    }

    // Gerar calend치rio quando a p치gina carregar
    generateCalendar();
  </script>
</body>
</html>

